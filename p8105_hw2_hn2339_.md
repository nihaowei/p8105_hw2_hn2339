p8105\_hw2\_hn2339
================
Haowei Ni
2018/9/30

``` r
library(tidyverse)
```

    ## ─ Attaching packages ──────────────────────── tidyverse 1.2.1 ─

    ## ✔ ggplot2 3.0.0     ✔ purrr   0.2.5
    ## ✔ tibble  1.4.2     ✔ dplyr   0.7.6
    ## ✔ tidyr   0.8.1     ✔ stringr 1.3.1
    ## ✔ readr   1.1.1     ✔ forcats 0.3.0

    ## ─ Conflicts ────────────────────────── tidyverse_conflicts() ─
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(dplyr)
```

Question 1
==========

``` r
NYC_Subway <- read_csv("data /NYC_Subway.csv") %>%
  janitor::clean_names() %>%
  select(-division, -exit_only, -staffing, -staff_hours, -free_crossover, -north_south_street, -east_west_street, -corner, -station_location, -entrance_location, -entrance_longitude, -entrance_latitude) %>%
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE)) 
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

There are totally 20 variables in this data set. Retain line, statation name, station longitude/latitude, route1~11, entrance type, entry, vending and ADA compliance. Step 1 is change the capital letter to lower case. Step 2 is remove all the unwanted columns. Step 3 is change the entry variable (YES or NO) to logical variable (TRUE or FLASE). The data is not tidy yet.

``` r
 #. keep_all = TRUE keep all other data 
distinct_station = distinct(NYC_Subway, station_name, line, route1, .keep_all = TRUE) 
   dim(distinct_station)
```

    ## [1] 466  20

``` r
ADA_compliant = filter(distinct_station, ada == TRUE)
   dim(ADA_compliant)
```

    ## [1] 84 20

``` r
Without_vending = filter(distinct_station, vending == "NO", entry == TRUE)
   dim(Without_vending)
```

    ## [1]  5 20

``` r
Without_vending_no = filter(distinct_station, vending == "NO")
   dim(Without_vending_no)
```

    ## [1]  9 20

There are totally 450 distinct stations both by name and by line. There are totally 75 stations are ADA compliant. The proportion is 5/9 = 55.6%

``` r
reformat_data = gather(NYC_Subway, key = route_number, value =route_name, route1:route11 )
   distinct_AA = distinct(reformat_data, station_name, line, route_name, .keep_all = TRUE) 
   distinct_A = filter(distinct_AA, route_name == "A")
   dim(distinct_A) 
```

    ## [1] 60 11

``` r
ADA = filter(distinct_A, ada == TRUE)
   dim(ADA) 
```

    ## [1] 17 11

There are totally 60 stations. There are 17 ADA compliant.

Question 2
==========
